<!DOCTYPE html> 
<html> 
<head> 
	<title>Blueprint</title> 
	<link href="http://fonts.googleapis.com/css?family=Reenie+Beanie" rel="stylesheet" type="text/css">
	<meta name="viewport" content="width=device-width, initial-scale=1"> 
	<link rel='stylesheet' type='text/css' href='fullcalendar/fullcalendar.css' />
    <link rel='stylesheet' type='text/css' href='fullcalendar/fullcalendar.print.css' media='print' />
	<link rel="stylesheet" href="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.css" />
	<link rel="stylesheet" href="http://code.jquery.com/ui/1.9.0/themes/base/jquery-ui.css" />
	<script src="http://code.jquery.com/jquery-1.8.2.min.js"></script>
	<!--<script type='text/javascript' src='fullcalendar/jquery-ui-1.8.23.custom.min.js'></script>-->
	<script src="http://code.jquery.com/ui/1.9.0/jquery-ui.js"></script>
	<script type='text/javascript' src='fullcalendar/fullcalendar.js'></script>
	<script src="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.js"></script>
	<script src="jquery.ui.touch-punch.min.js"></script>
	<script type='text/javascript'>
	
	
	$(document).ready(function() {
		var date = new Date();
		var d = date.getDate();
		var m = date.getMonth();
		var y = date.getFullYear();
  
			var eventsData = [
				{
					title: 'All Day Event',
					start: new Date(y, m, 1),
					//color: '#378006'
				},
				{
					title: 'Long Event',
					start: new Date(y, m, d-5),
					end: new Date(y, m, d-2)
				},
				{
					id: 999,
					title: 'Repeating Event',
					start: new Date(y, m, d-3, 16, 0),
					allDay: false
				},
				{
					id: 999,
					title: 'Repeating Event',
					start: new Date(y, m, d+4, 16, 0),
					allDay: false
				},
				{
					title: 'Meeting',
					start: new Date(y, m, d, 10, 30),
					allDay: false
				},
				{
					title: 'Lunch',
					start: new Date(y, m, d, 12, 0),
					end: new Date(y, m, d, 14, 0),
					allDay: false
				},
				{
					title: 'Birthday Party',
					start: new Date(y, m, d+1, 19, 0),
					end: new Date(y, m, d+1, 22, 30),
					allDay: false
				},
				{
					title: 'Click for Google',
					start: new Date(y, m, 28),
					end: new Date(y, m, 29),
				}
			];
		
		$('#calendar').fullCalendar({
				header: {
					left: 'prev,next today',
					center: 'title',
					right: 'month,agendaWeek,agendaDay'
				},
			
				eventClick: function(calEvent, jsEvent, view) {
        
		
				console.log(calEvent.title);
        		// change the border color just for fun
        		$('#popupPanel').popup("open");
        		$(this).css('border-color', 'red');
       		 $('#title').html("Task Info");
				$('#task_desc').html(calEvent.title);
				$('#start').html(calEvent.start.toDateString());
				$('#end').html(calEvent.end.toDateString());
		
				$('#url').html(calEvent.url);
				$( "#progressbar" ).progressbar({ value :41});
    	}, 
			
			editable: true,
			events: eventsData
		});

		$('.fc-header-right').css("display","none");
		showMonthView();
	});

	function showWeekView(){
		$('#calendar').fullCalendar('changeView', "agendaWeek");
	};

	function showDayView(){
		$('#calendar').fullCalendar('changeView', "agendaDay");
	};

	function showMonthView(){
		$('#calendar').fullCalendar('changeView', "month");
	};

</script>

<script type='text/javascript'>

$( document ).on( "pageinit", function() {
    $( "#addTask" ).on({
        popupbeforeposition: function() {
            var maxHeight = $( window ).height() - 60 + "px";
            $( "#addTask" ).css( "max-height", maxHeight );
        }
    });

</script>

<style type='text/css'>
	body {
		margin-top: 40px;
		text-align: center;
		font-size: 14px;
		font-family: "Lucida Grande",Helvetica,Arial,Verdana,sans-serif;
		}

	#calendar {
		margin: 0 auto;
		}

	#popupPanel-popup {
    right: 0 !important;
    left: auto !important;
	}

	#popupPanel {
		width: 200px;
		border: 1px solid #000;
		border-right: none;
		background: rgba(0,0,0,.5);
		margin: -1px 0;
	}
	#popupPanel .ui-btn {
		margin: 2em 15px;
	}

	#popupPanel #task_desc, #start, #end
	{
	 margin: 1em 10px;
	text-align: center;
		color: #FFFFFF;
		font-size: 14px;
		font-family: "Lucida Grande",Helvetica,Arial,Verdana,sans-serif;
	}

	#popupPanel #title
	{
	 margin: 2em 15px	;
	text-align: center;
		color: #FFFFFF;
		font-size: 18px;
		font-family: "Lucida Grande",Helvetica,Arial,Verdana,sans-serif;
	}	
		
	
	#chi_container div, #chi_container img{
	top: 0;
	left: 0;
	position: absolute;
	width: 35%;
	height: 110%;
	}
	
</style>
</head> 
<body> 

<div data-role="popup" id="popup_img">
	<img src="blueprint_logo.png" alt="blueprint"></img>
</div>


<div data-role="page">
	<div data-role="header" data-theme="b">
		<div id = "chi_container">
		<div id="chi_image"><img src="blueprint_logo.png" alt="BLUEPRINT"></div>
		</div>
		<p style="font-size: 58px; margin-top: 10px; margin-bottom: 0px; margin-left: 10px; margin-right: 10px; text-align: center; font-family: 'Reenie Beanie', cursive;">
		Welcome to your Blueprint</p>
		<div data-role="controlgroup" data-type="horizontal">
			<div class="ui-btn-right">
				<a href="index.html" data-icon="gear" data-role="button" data-theme="d">Settings</a>
				<a href="#addTask" data-icon="plus" data-role="button" data-rel="popup" data-theme="d">Add Task</a>
			</div>
			
			
<div data-role="popup" id="addTask">
    <div data-role="content">
        <form action="">
            <div data-role="fieldcontain">
                    <label for="description">
                        Description
                    </label>
                    <input name="description" id="description" placeholder="Enter task description"
                    value="" type="text">
            </div>
            <div data-role="fieldcontain">
                    <label for="startdate">
                    Start
                    </label>
                    <input name="" id="startdate" placeholder="" value="" type="date">
            </div>            
            <div data-role="fieldcontain">
                    <label for="deadline">
                        Deadline
                    </label>
                    <input name="" id="deadline" placeholder="" value="" type="date">
            </div>
            <div data-role="fieldcontain">
            	<fieldset data-role="controlgroup" data-type="horizontal">
                    <legend>
                        Priority:
                    </legend>
                    <input id="high" name="" value="high" type="radio" checked="checked">
                    <label for="high">
                        	High
                    </label>
                    <input id="medium" name="" value="medium" type="radio">
                    <label for="medium">
                    	Medium
                    </label>
                    <input id="low" name="" value="low" type="radio">
                    <label for="low">
                        Low
                    </label>
                </fieldset>
        	</div>
        	<script type='text/javascript'>
    
    function submitTask(){
    	var newTask=[
    	{
    		title : $("#description").val(),
    		start : new Date($("#startdate").val()),
    		end : new Date($("#deadline").val()),
    		color : function(){
    			if($("#high").attr("checked")=="checked")
    			{
    				console.log("high checked");
    				return '#378006';
    			}
    			else if($("#medium").attr("checked")=="checked")
    			{
    				console.log("medium checked");
    				return '#300000';
    			}
    			else($("#low").attr("checked")=="checked")
    			{
    				console.log("low checked");
    				return '#304050';
    			}
    		}()
    	}
    	];
    	
    	$('#calendar').fullCalendar( 'addEventSource', newTask );
    }

</script>
        <a href="" id="addtaskbutton" data-role="button" data-theme="b" onclick="submitTask()">Add Task</a>
        </form>
    </div>  
</div>
			
			
			
		<!--	<div data-role="popup" id="addTask">
				<p>This is a completely basic popup, no options set.<p>
			</div>
			-->
		</div><!-- /controlgroup -->
	</div><!-- /header -->
	
	<div data-role="content" id='calendar'>		
						
		<div data-role="popup" id="popupPanel" data-corners="false" data-theme="none" data-shadow="false" data-tolerance="0,0">

		<div data-role = "header" id="title"></div>
		<div id="task_desc"></div>
		<div id="start"></div>
		<div id="end"></div>
		<div id="url"></div>
		<div id="progressbar">  </div>
		 
		</div>
	
	</div><!-- /content -->

	
	<div data-role="footer" data-position="fixed" data-theme="b"> 
		<div data-role="navbar">
			<ul>
				<li><a href="" onclick="showDayView()">Day View</a></li>
				<li><a href="" onclick="showWeekView()">Week View</a></li>
				<li><a href="" onclick="showMonthView()">Month View</a></li>
			</ul>
		</div><!-- /navbar -->
	</div> <!--/footer-->
</div><!-- /page -->

</body>
</html>